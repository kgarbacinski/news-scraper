[![CI & Tests](https://github.com/dyeroshenko/news-scraper/actions/workflows/main.yml/badge.svg?branch=main)](https://github.com/dyeroshenko/news-scraper/actions/workflows/main.yml)

# news-scraper
Microservices-driven application to scrap news content from multiple sources. Each service runs as independent app and interactes with other services via REST stack:

* ```ui-app```: Django app responsible for content rendering and fetching data from ```scraper-app```.
* ```scraper-app```: custom algorithm for asynchronous (using Asyncio) data scrapping and processing. Used together with Celery for messages brokering. Scraping requests contain randomized User-Agent headers to generate 'legit' traffic ðŸ™ƒ
* ```tokenization_app```: generates and shares JWT (Auth tokens) for API calls between services. Token is being generated based on secret combination stored in the app enviroment.
* ```history_app```: stores scraping history generated by ```scraper-app``` and called by ```ui-app``` for history view render.

```scraper-app```, ```tokenization-app``` and ```history-app``` are powered by FastAPI to allow remote requests. Endpoints are auth-protected by JWT to block requests from non-authorized consumers.

### App view
![image](https://github.com/dyeroshenko/news-scraper/blob/main/repo_assets/Untitled_%20Apr%2011%2C%202022%209_11%20PM.gif)

### Architecture blueprint
![image](https://github.com/dyeroshenko/news-scraper/blob/main/repo_assets/services_design.png)

## Tech stack
* Python 3.10
* Django 4.0
* Postgres 14.1
* Docker 4.1
* Docker-compose 1.29
* JavaScript
* FastAPI 0.7
* Celery 5.2
* Beautifulsoup 4.1
* Asyncio
* and many more!

## How to run locally
1. Clone repository locally
2. Create ```.env``` file in root directory with following variables:
  ```
    # AUTH SECRETS
    JWT_SECRET=17d1b949fc2343ca0bf0296574c4ceda
    JWT_ALGORITHM=HS256

    # DB credentials
    HISTORY_APP_DB=history_db
    HISTORY_APP_DB_USER=postgres
    HISTORY_APP_DB_PASSWORD=postgres

    # Admin credentials to get new token
    CREDENTIALS_LOGIN=admin
    CREDENTIALS_PASSWORD=1234
  ```
3. Run docker-compose with ```docker-compose up --build```
4. Open ```localhost:8006``` in your browser
